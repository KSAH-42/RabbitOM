
H265Stream.Configuration.pps
H265Stream.Configuration.sps
H265Stream.Configuration.vps
H265Stream.Configuration.IsSetup()
H265Stream.Configuration.Setup(vps,sps,pps)
H265Stream.Configuration.EnsureSetup()

H265Stream.WritePps(Packet packet)
H265Stream.WriteSps(Packet packet)
H265Stream.WriteVps(Packet packet)
H265Stream.WriteNal(Packet packet)
H265Stream.WriteNalAggregation(Packet packet)
H265Stream.WriteNalFragmentation(Packet packet)
H265Stream.Write(Packet packet)

static H265Stream.HandlePacket( H265Stream stream , Packet packet)
{
    if (h265Stream.Type == Vps )
    {
        h265Stream.WritePps( packet );
        return;
    }

    if (h265Stream.Type == Sps )
    {
        h265Stream.WriteSps( packet );
        return;
    }

    if (h265Stream.Type == Vps )
    {
        h265Stream.WriteVps( packet );
        return;
    }

    if (h265Stream.Type == Sps )
    {
        h265Stream.WriteSps( packet );
        return;
    }
}

sinon implementer un H265StreamManager 

class H265StreamManager
{
    private readonly H265Stream _stream;

    public H265StreamManager(H265Stream stream)
    {
        _stream = stream;
    }

    public void WriteBuffer( byte[] buffer )
    {
        if ( Packet.TryParse( buffer , out var packet ) )
        {
            if ( packet.Type == VPS )
            {
                _stream.WriteVps( packet );
                return;
            }

            if ( packet.Type == SPS )
            {
                _stream.WriteSps( packet );
                return;
            }

            if ( packet.Type == PPS )
            {
                _stream.WritePps( packet );
                return;
            }

            if ( packet.Type == Aggregation )
            {
                _stream.WriteAggregation( packet );
                return;
            }

            if ( packet.Type == Fragmentation )
            {
                _stream.WriteFragmentation( packet );
                return;
            }

            _stream.Write( packet );
        }
    }
}